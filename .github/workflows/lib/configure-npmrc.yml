name: Configure .npmrc

on:
  workflow_call:
    secrets:
      npm-token:
        required: true

jobs:
  configure-npmrc:
    runs-on: ubuntu-latest
    env:
      NPM_TOKEN: ${{ secrets.npm-token }}
    steps:
      - name: Configure .npmrc
        run: |
          cat > .npmrc << EOL
          strict-peer-dependencies=false
          auto-install-peers=true
          registry=https://registry.npmjs.org/
          //registry.npmjs.org/:_authToken=\${NPM_TOKEN}
          save-exact=true
          EOL